import React from "react"
import "./ContextMenu.scss"

/**
 * ContextMenu component for ticket actions
 * @param {boolean} visible - Whether the menu is visible
 * @param {string} ticketId - ID of the ticket
 * @param {function} onAction - Callback function for menu actions
 * @param {function} getShareStatusText - Function to get share status text
 * @param {object} position - Position object with x, y coordinates
 */
export const ContextMenu = ({
  visible,
  ticketId,
  onAction,
  getShareStatusText,
  position = { x: 0, y: 0 },
}) => {
  if (!visible) return null

  const menuStyle = {
    position: "fixed",
    top: `${position.y + 12}px`,
    left: `${position.x - 12}px`,
    zIndex: 99999,
  }

  return (
    <div
      className="contextMenu globalContextMenu"
      style={menuStyle}
      onClick={(e) => e.stopPropagation()}
    >
      <div
        className="contextMenuItem"
        onClick={() => onAction("rename", ticketId)}
      >
        <svg
          width="14"
          height="14"
          viewBox="0 0 14 14"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clipPath="url(#clip0_154_875)">
            <path
              d="M13.1769 3.12468C13.1609 3.02322 12.9981 2.11174 12.3377 1.4462C11.6744 0.797272 10.7595 0.63676 10.6575 0.620709C10.5216 0.598352 10.3829 0.627015 10.2665 0.699245C10.1989 0.741093 8.57311 1.75919 5.27231 5.03649C1.79667 8.48805 0.885191 9.8673 0.847929 9.92406C0.795763 10.0043 0.764234 10.0966 0.756782 10.1918L0.573914 12.5255C0.561302 12.6929 0.621494 12.8568 0.740158 12.9755C0.847929 13.0833 0.994109 13.1435 1.14602 13.1435C1.16035 13.1435 1.17526 13.1435 1.19016 13.1417L3.54108 12.9606C3.63567 12.9531 3.72682 12.9228 3.8065 12.8717C3.86382 12.835 5.25282 11.9299 8.72789 8.47945C12.0293 5.20159 13.0548 3.58673 13.0972 3.51966C13.1706 3.40214 13.1993 3.26169 13.1775 3.12468H13.1769ZM7.92017 7.66601C5.09403 10.4721 3.68153 11.5527 3.29745 11.8296L1.76972 11.9476L1.88781 10.4388C2.16986 10.0536 3.25961 8.65086 6.07945 5.85051C6.95252 4.98375 7.7052 4.27922 8.33922 3.71284C8.34496 3.71399 8.35069 3.71514 8.357 3.71628C8.36387 3.71743 9.06611 3.83896 9.51554 4.27807C9.9581 4.71088 10.0825 5.38445 10.0859 5.40108C10.0859 5.40337 10.0871 5.40509 10.0871 5.40738C9.5144 6.03968 8.80012 6.79237 7.92017 7.66601ZM10.9636 4.40763C10.8266 4.10151 10.6214 3.75526 10.3175 3.45832C10.0171 3.16424 9.66746 2.96475 9.3579 2.83175C10.0108 2.28716 10.4517 1.9627 10.6815 1.80161C10.9217 1.8727 11.2829 2.01773 11.5305 2.26022C11.7902 2.52162 11.9289 2.8799 11.9949 3.10233C11.8315 3.33163 11.507 3.76673 10.9642 4.4082L10.9636 4.40763Z"
              fill="#C1C1C1"
            />
          </g>
          <defs>
            <clipPath id="clip0_154_875">
              <rect width="13.7581" height="13.7581" fill="white" />
            </clipPath>
          </defs>
        </svg>
        Переименовать
      </div>
      <div
        className="contextMenuItem"
        onClick={() => onAction("toggle_share", ticketId)}
      >
        <svg
          width="14"
          height="15"
          viewBox="0 0 14 15"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clipPath="url(#clip0_154_879)">
            <path
              d="M9.17201 0.356934H4.58599C3.82609 0.357844 3.09757 0.660119 2.56024 1.19746C2.02291 1.73479 1.72064 2.46331 1.71973 3.22322V13.5419C1.71981 13.6461 1.74832 13.7484 1.80221 13.8377C1.85609 13.9269 1.9333 13.9998 2.02552 14.0485C2.11774 14.0971 2.22149 14.1197 2.32559 14.1137C2.42968 14.1078 2.53019 14.0736 2.61629 14.0148L3.82356 13.1899L5.03083 14.0148C5.12622 14.0801 5.23912 14.1151 5.35472 14.1151C5.47032 14.1151 5.58323 14.0801 5.67861 14.0148L6.88244 13.1899L8.08627 14.0148C8.18171 14.0802 8.29472 14.1153 8.41044 14.1153C8.52616 14.1153 8.63918 14.0802 8.73462 14.0148L9.93845 13.1904L11.1423 14.0142C11.2283 14.0728 11.3287 14.1069 11.4327 14.1128C11.5367 14.1187 11.6402 14.0961 11.7324 14.0476C11.8245 13.999 11.9016 13.9263 11.9555 13.8372C12.0094 13.7481 12.038 13.646 12.0383 13.5419V3.22322C12.0374 2.46331 11.7351 1.73479 11.1978 1.19746C10.6604 0.660119 9.93191 0.357844 9.17201 0.356934ZM10.8918 12.4527L10.2612 12.0216C10.1657 11.956 10.0526 11.9209 9.93673 11.9209C9.82089 11.9209 9.70777 11.956 9.61227 12.0216L8.40844 12.8465L7.20461 12.0216C7.10917 11.9561 6.99615 11.9211 6.88043 11.9211C6.76471 11.9211 6.6517 11.9561 6.55626 12.0216L5.35243 12.8465L4.1486 12.0216C4.05327 11.9564 3.94048 11.9215 3.825 11.9215C3.70951 11.9215 3.59672 11.9564 3.5014 12.0216L2.86623 12.4527V3.22322C2.86623 2.76711 3.04742 2.32968 3.36994 2.00716C3.69245 1.68464 4.12988 1.50345 4.58599 1.50345H9.17201C9.62812 1.50345 10.0655 1.68464 10.3881 2.00716C10.7106 2.32968 10.8918 2.76711 10.8918 3.22322V12.4527Z"
              fill="#C1C1C1"
            />
            <path
              d="M9.17197 4.94336H4.58595C4.26935 4.94336 4.0127 5.20002 4.0127 5.51662C4.0127 5.83322 4.26935 6.08987 4.58595 6.08987H9.17197C9.48857 6.08987 9.74522 5.83322 9.74522 5.51662C9.74522 5.20002 9.48857 4.94336 9.17197 4.94336Z"
              fill="#C1C1C1"
            />
            <path
              d="M8.02546 7.23584H4.58595C4.26935 7.23584 4.0127 7.4925 4.0127 7.8091C4.0127 8.1257 4.26935 8.38235 4.58595 8.38235H8.02546C8.34206 8.38235 8.59871 8.1257 8.59871 7.8091C8.59871 7.4925 8.34206 7.23584 8.02546 7.23584Z"
              fill="#C1C1C1"
            />
          </g>
          <defs>
            <clipPath id="clip0_154_879">
              <rect
                width="13.7581"
                height="13.7582"
                fill="white"
                transform="translate(0 0.356934)"
              />
            </clipPath>
          </defs>
        </svg>
        {getShareStatusText()}
      </div>
      <div
        className="contextMenuItem deleteItem"
        onClick={() => onAction("delete", ticketId)}
      >
        <svg
          width="14"
          height="15"
          viewBox="0 0 14 15"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clipPath="url(#clip0_154_885)">
            <path
              d="M12.0384 3.00686H10.2613C10.1283 2.3599 9.77625 1.77859 9.26457 1.3609C8.7529 0.943219 8.11286 0.714701 7.45235 0.713867L6.30583 0.713867C5.64532 0.714701 5.00528 0.943219 4.49361 1.3609C3.98193 1.77859 3.6299 2.3599 3.49685 3.00686H1.71974C1.56771 3.00686 1.4219 3.06726 1.31439 3.17477C1.20688 3.28227 1.14648 3.42808 1.14648 3.58011C1.14648 3.73215 1.20688 3.87796 1.31439 3.98546C1.4219 4.09297 1.56771 4.15336 1.71974 4.15336H2.29301V11.6056C2.29392 12.3655 2.59619 13.094 3.13353 13.6313C3.67087 14.1687 4.3994 14.4709 5.15931 14.4719H8.59887C9.35878 14.4709 10.0873 14.1687 10.6247 13.6313C11.162 13.094 11.4643 12.3655 11.4652 11.6056V4.15336H12.0384C12.1905 4.15336 12.3363 4.09297 12.4438 3.98546C12.5513 3.87796 12.6117 3.73215 12.6117 3.58011C12.6117 3.42808 12.5513 3.28227 12.4438 3.17477C12.3363 3.06726 12.1905 3.00686 12.0384 3.00686ZM6.30583 1.86037H7.45235C7.80793 1.8608 8.15467 1.97122 8.44502 2.17648C8.73537 2.38174 8.95511 2.6718 9.07411 3.00686H4.68408C4.80307 2.6718 5.02282 2.38174 5.31316 2.17648C5.60351 1.97122 5.95025 1.8608 6.30583 1.86037ZM10.3187 11.6056C10.3187 12.0617 10.1375 12.4991 9.81494 12.8217C9.49242 13.1442 9.05499 13.3254 8.59887 13.3254H5.15931C4.70319 13.3254 4.26576 13.1442 3.94324 12.8217C3.62072 12.4991 3.43953 12.0617 3.43953 11.6056V4.15336H10.3187V11.6056Z"
              fill="#981D1F"
            />
            <path
              d="M5.73244 11.0323C5.88448 11.0323 6.03029 10.9719 6.1378 10.8644C6.2453 10.7569 6.3057 10.6111 6.3057 10.459V7.01954C6.3057 6.8675 6.2453 6.7217 6.1378 6.61419C6.03029 6.50668 5.88448 6.44629 5.73244 6.44629C5.5804 6.44629 5.43459 6.50668 5.32708 6.61419C5.21958 6.7217 5.15918 6.8675 5.15918 7.01954V10.459C5.15918 10.6111 5.21958 10.7569 5.32708 10.8644C5.43459 10.9719 5.5804 11.0323 5.73244 11.0323Z"
              fill="#981D1F"
            />
            <path
              d="M8.02639 11.0323C8.17842 11.0323 8.32423 10.9719 8.43174 10.8644C8.53925 10.7569 8.59965 10.6111 8.59965 10.459V7.01954C8.59965 6.8675 8.53925 6.7217 8.43174 6.61419C8.32423 6.50668 8.17842 6.44629 8.02639 6.44629C7.87435 6.44629 7.72854 6.50668 7.62103 6.61419C7.51352 6.7217 7.45312 6.8675 7.45312 7.01954V10.459C7.45312 10.6111 7.51352 10.7569 7.62103 10.8644C7.72854 10.9719 7.87435 11.0323 8.02639 11.0323Z"
              fill="#981D1F"
            />
          </g>
          <defs>
            <clipPath id="clip0_154_885">
              <rect
                width="13.7583"
                height="13.758"
                fill="white"
                transform="translate(0 0.713867)"
              />
            </clipPath>
          </defs>
        </svg>
        Удалить
      </div>
    </div>
  )
}
